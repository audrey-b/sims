<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate Datasets — sims_simulate • sims</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate Datasets — sims_simulate"><meta name="description" content="Simulates datasets using JAGS or R code. By default
returns the datasets as an nlist::nlists_object().
If path is provided then the datasets are written to the directory
as individual .rds files."><meta property="og:description" content="Simulates datasets using JAGS or R code. By default
returns the datasets as an nlist::nlists_object().
If path is provided then the datasets are written to the directory
as individual .rds files."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sims</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/sims.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/poissonconsulting/sims/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Simulate Datasets</h1>
      <small class="dont-index">Source: <a href="https://github.com/poissonconsulting/sims/blob/main/R/simulate.R" class="external-link"><code>R/simulate.R</code></a></small>
      <div class="d-none name"><code>sims_simulate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Simulates datasets using JAGS or R code. By default
returns the datasets as an <code><a href="https://rdrr.io/pkg/nlist/man/nlists.html" class="external-link">nlist::nlists_object()</a></code>.
If <code>path</code> is provided then the datasets are written to the directory
as individual <code>.rds</code> files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sims_simulate</span><span class="op">(</span></span>
<span>  <span class="va">code</span>,</span>
<span>  constants <span class="op">=</span> <span class="fu">nlist</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/nlist/man/nlist.html" class="external-link">nlist</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  parameters <span class="op">=</span> <span class="fu">nlist</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/nlist/man/nlist.html" class="external-link">nlist</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  monitor <span class="op">=</span> <span class="st">".*"</span>,</span>
<span>  stochastic <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  latent <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  nsims <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  exists <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rdists <span class="op">=</span> <span class="fu"><a href="sims_rdists.html">sims_rdists</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ask <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"sims.ask"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-code">code<a class="anchor" aria-label="anchor" href="#arg-code"></a></dt>
<dd><p>A string of the JAGS or R code to generate the data.
The JAGS code must not be in a data or model block.</p></dd>


<dt id="arg-constants">constants<a class="anchor" aria-label="anchor" href="#arg-constants"></a></dt>
<dd><p>An nlist object (or list that can be coerced to nlist)
specifying the values of nodes in code.
The values are included in the output dataset.</p></dd>


<dt id="arg-parameters">parameters<a class="anchor" aria-label="anchor" href="#arg-parameters"></a></dt>
<dd><p>An nlist object (or list that can be coerced to nlist)
specifying the values of nodes in code.
The values are not included in the output dataset.</p></dd>


<dt id="arg-monitor">monitor<a class="anchor" aria-label="anchor" href="#arg-monitor"></a></dt>
<dd><p>A character vector (or regular expression if a string)
specifying the names of the nodes in code to include in the dataset.
By default all nodes are included.</p></dd>


<dt id="arg-stochastic">stochastic<a class="anchor" aria-label="anchor" href="#arg-stochastic"></a></dt>
<dd><p>A logical scalar specifying whether to monitor
deterministic and stochastic (NA), only deterministic (FALSE)
or only stochastic nodes (TRUE).</p></dd>


<dt id="arg-latent">latent<a class="anchor" aria-label="anchor" href="#arg-latent"></a></dt>
<dd><p>A logical scalar specifying whether to monitor
observed and latent (NA), only latent (TRUE)
or only observed nodes (FALSE).</p></dd>


<dt id="arg-nsims">nsims<a class="anchor" aria-label="anchor" href="#arg-nsims"></a></dt>
<dd><p>A whole number between 1 and 1,000,000 specifying
the number of data sets to simulate. By default 1 data set is simulated.</p></dd>


<dt id="arg-save">save<a class="anchor" aria-label="anchor" href="#arg-save"></a></dt>
<dd><p>A flag specifying whether to return the data sets as
an <code>nlists</code> object or save in <code>path</code>. If <code>save = NA</code>
the datasets are returned as an <code>nlists</code> object and saved in <code>path</code>.</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>A string specifying the path to the directory to save
the data sets in.</p></dd>


<dt id="arg-exists">exists<a class="anchor" aria-label="anchor" href="#arg-exists"></a></dt>
<dd><p>A flag specifying whether the <code>path</code> directory should
already exist (if <code>exists = NA</code> it doesn't matter).</p></dd>


<dt id="arg-rdists">rdists<a class="anchor" aria-label="anchor" href="#arg-rdists"></a></dt>
<dd><p>A character vector specifying the R functions to recognize
as stochastic.</p></dd>


<dt id="arg-ask">ask<a class="anchor" aria-label="anchor" href="#arg-ask"></a></dt>
<dd><p>A flag specifying whether to ask before deleting sims
compatible files.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>A flag specifying whether to suppress warnings.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>By default an <code><a href="https://rdrr.io/pkg/nlist/man/nlists.html" class="external-link">nlist::nlists_object()</a></code> of the simulated data.
Otherwise if <code>path</code> is defined saves the datasets as individual <code>.rds</code>
files and returns TRUE.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>JAGS code is identified by the presence of '~' indicating a
stochastic variable node.
Otherwise code is assumed to be R code and stochastic variable nodes
are those where assignment is immediately succeeded
by a call to one of the functions named in <code>rdists</code>.</p>
<p>Both constants and parameters must be <code>[nlist::nlist_object]s</code>
(or lists that can be coerced to such) .
The only difference between constants and parameters is that the values in
constants are appended to the output data while the values in parameters
are not.
Neither constants or parameters can include missing values nor can they
have elements with the same name.
Elements which are not in code are dropped with a warning
(unless <code>silent = TRUE</code> in which case the warning is suppressed).</p>
<p>Each set of simulated data set is written as a separate .rds file.
The files are labelled <code>data0000001.rds</code>, <code>data0000002.rds</code>,
<code>data0000003.rds</code> etc.
The argument values are saved in the hidden file <code>.sims.rds</code>.</p>
<p>sims compatible files are those matching the regular expression
<code>^((data\\\\d\{7,7\})|([.]sims))[.]rds$</code>.</p>
<p>Parallelization is implemented using the future package.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="sims_rdists.html">sims_rdists()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">101</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">sims_simulate</span><span class="op">(</span><span class="st">"a &lt;- runif(1)"</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, exists <span class="op">=</span> <span class="cn">NA</span>, ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.6373621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> an nlists object of an nlist object with 1 numeric element</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Audrey Beliveau, Joe Thorley.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

